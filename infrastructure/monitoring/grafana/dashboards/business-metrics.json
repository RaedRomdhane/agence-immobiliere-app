{
  "title": "Business Metrics",
  "uid": "business-metrics",
  "timezone": "browser",
  "schemaVersion": 30,
  "version": 1,
  "refresh": "5m",
  "tags": ["business", "analytics"],
  "panels": [
      {
        "id": 1,
        "title": "User Registrations (24h)",
        "type": "stat",
        "gridPos": {"h": 6, "w": 6, "x": 0, "y": 0},
        "targets": [
          {
            "expr": "increase(user_registrations_total[24h])",
            "refId": "A"
          }
        ],
        "options": {
          "graphMode": "area",
          "colorMode": "value"
        }
      },
      {
        "id": 2,
        "title": "Active Users (24h)",
        "type": "stat",
        "gridPos": {"h": 6, "w": 6, "x": 6, "y": 0},
        "targets": [
          {
            "expr": "count(count_over_time(user_login_total[24h]))",
            "refId": "A"
          }
        ],
        "options": {
          "graphMode": "area",
          "colorMode": "value"
        }
      },
      {
        "id": 3,
        "title": "Property Views (24h)",
        "type": "stat",
        "gridPos": {"h": 6, "w": 6, "x": 12, "y": 0},
        "targets": [
          {
            "expr": "increase(property_views_total[24h])",
            "refId": "A"
          }
        ],
        "options": {
          "graphMode": "area",
          "colorMode": "value"
        }
      },
      {
        "id": 4,
        "title": "Contact Requests (24h)",
        "type": "stat",
        "gridPos": {"h": 6, "w": 6, "x": 18, "y": 0},
        "targets": [
          {
            "expr": "increase(contact_requests_total[24h])",
            "refId": "A"
          }
        ],
        "options": {
          "graphMode": "area",
          "colorMode": "value"
        }
      },
      {
        "id": 5,
        "title": "Search Activity",
        "type": "graph",
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 6},
        "targets": [
          {
            "expr": "sum(rate(property_search_total[5m])) by (search_type)",
            "legendFormat": "{{ search_type }}",
            "refId": "A"
          }
        ],
        "yaxes": [
          {"format": "rps"},
          {"format": "short"}
        ]
      },
      {
        "id": 6,
        "title": "Login Success Rate",
        "type": "graph",
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 6},
        "targets": [
          {
            "expr": "sum(rate(login_attempts_total{status=\"success\"}[5m])) / sum(rate(login_attempts_total[5m])) * 100",
            "legendFormat": "Success %",
            "refId": "A"
          }
        ],
        "yaxes": [
          {"format": "percent", "max": 100},
          {"format": "short"}
        ]
      },
      {
        "id": 7,
        "title": "Property Favorites (24h)",
        "type": "graph",
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
        "targets": [
          {
            "expr": "increase(property_favorites_total[24h])",
            "legendFormat": "Favorites Added",
            "refId": "A"
          }
        ]
      },
      {
        "id": 8,
        "title": "Top Properties by Views",
        "type": "table",
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
        "targets": [
          {
            "expr": "topk(10, sum(increase(property_views_total[24h])) by (property_id, property_title))",
            "format": "table",
            "instant": true,
            "refId": "A"
          }
        ]
      },
      {
        "id": 9,
        "title": "Payment Transactions",
        "type": "graph",
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 22},
        "targets": [
          {
            "expr": "sum(rate(payment_transactions_total[5m])) by (status)",
            "legendFormat": "{{ status }}",
            "refId": "A"
          }
        ]
      },
      {
        "id": 10,
        "title": "Revenue (24h)",
        "type": "stat",
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 22},
        "targets": [
          {
            "expr": "sum(increase(payment_amount_total[24h]))",
            "refId": "A"
          }
        ],
        "options": {
          "graphMode": "area",
          "colorMode": "value",
          "unit": "currencyEUR"
        }
      }
    ]
  }
