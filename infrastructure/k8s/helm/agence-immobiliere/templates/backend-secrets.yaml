{{- if .Values.backend.enabled -}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "agence-immobiliere.fullname" . }}-backend-secrets
  labels:
    {{- include "agence-immobiliere.labels" . | nindent 4 }}
    app.kubernetes.io/component: backend
type: Opaque
stringData:
  # These values should be provided via --set-string flags or external secret management
  MONGODB_URI: {{ .Values.secrets.MONGODB_URI | default "mongodb://admin:password@agence-immobiliere-mongodb:27017/agence_immobiliere?authSource=admin" | quote }}
  JWT_SECRET: {{ .Values.secrets.JWT_SECRET | default "change-me-in-production" | quote }}
  GOOGLE_CLIENT_ID: {{ .Values.secrets.GOOGLE_CLIENT_ID | default "" | quote }}
  GOOGLE_CLIENT_SECRET: {{ .Values.secrets.GOOGLE_CLIENT_SECRET | default "" | quote }}
  SESSION_SECRET: {{ .Values.secrets.SESSION_SECRET | default "change-me-in-production" | quote }}
  AZURE_STORAGE_ACCOUNT_NAME: {{ .Values.secrets.AZURE_STORAGE_ACCOUNT_NAME | default "" | quote }}
  AZURE_STORAGE_ACCOUNT_KEY: {{ .Values.secrets.AZURE_STORAGE_ACCOUNT_KEY | default "" | quote }}
{{- end }}
